const n=function(){function n(){}return n.prototype.then=function(t,e){const o=new n,i=this.s;if(i){const n=1&i?t:e;if(n){try{r(o,1,n(this.v))}catch(n){r(o,2,n)}return o}return this}return this.o=function(n){try{const i=n.v;1&n.s?r(o,1,t?t(i):i):e?r(o,1,e(i)):r(o,2,i)}catch(n){r(o,2,n)}},o},n}();function r(t,e,o){if(!t.s){if(o instanceof n){if(!o.s)return void(o.o=r.bind(null,t,e));1&e&&(e=o.s),o=o.v}if(o&&o.then)return void o.then(r.bind(null,t,e),r.bind(null,t,2));t.s=e,t.v=o;const i=t.o;i&&i(t)}}function t(r){return r instanceof n&&1&r.s}const e="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function o(o,i,u){if("function"==typeof o[e]){var s,c,f,a=o[e]();if(function e(o){try{for(;!((s=a.next()).done||u&&u());)if((o=i(s.value))&&o.then){if(!t(o))return void o.then(e,f||(f=r.bind(null,c=new n,2)));o=o.v}c?r(c,1,o):c=o}catch(t){r(c||(c=new n),2,t)}}(),a.return){var l=function(n){try{s.done||a.return()}catch(n){}return n};if(c&&c.then)return c.then(l,function(n){throw l(n)});l()}return c}if(!("length"in o))throw new TypeError("Object is not iterable");for(var h=[],v=0;v<o.length;v++)h.push(o[v]);return function(e,o,i){var u,s,c=-1;return function f(a){try{for(;++c<e.length&&(!i||!i());)if((a=o(c))&&a.then){if(!t(a))return void a.then(f,s||(s=r.bind(null,u=new n,2)));a=a.v}u?r(u,1,a):u=a}catch(t){r(u||(u=new n),2,t)}}(),u}(h,function(n){return i(h[n])},u)}"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var i=require("path"),u=require("fs-promise"),s=u.readdir,c=u.writeFile,f=u.isDir,a=u.exists,l=require("extract-file-icon"),h=function(n,r){try{return Promise.resolve(s(n)).then(function(t){var e=[],u=o(t,function(t){var o=i.join(n,t);return Promise.resolve(f(o)).then(function(n){function t(){function n(n){r&&!1===n||e.push(o)}return r?Promise.resolve(r(o)).then(n):n(r)}var i=function(){if(n){var t=e.push;return Promise.resolve(h(o,r)).then(function(n){t.call.apply(t,[e].concat(n))})}}();return i&&i.then?i.then(t):t()})});return u&&u.then?u.then(function(){return e}):e})}catch(n){return Promise.reject(n)}},v=function(n,r){try{return Promise.resolve(function(n,r){try{for(var t=[],e={},o=0,u=n;o<u.length;o+=1)t.push(h(u[o],function(n){return r.includes(i.extname(n))}));return Promise.resolve(Promise.all(t)).then(function(n){for(var r=0,t=n;r<t.length;r+=1)for(var o=0,i=t[r];o<i.length;o+=1)e[i[o]]="";return Object.keys(e)})}catch(n){return Promise.reject(n)}}(n,r)).then(function(n){function r(){return Promise.resolve(Promise.all(e)).then(function(){return t})}var t=[],e=[],u=o(n,function(n){var r=i.basename(n).replace(i.extname(n),""),o=i.resolve(".","apps",r+".png").replace(/\\/g,"/");return t.push({name:r,icon:o}),Promise.resolve(a(o)).then(function(r){r||e.push(c(o,l(n,32)))})});return u&&u.then?u.then(r):r()})}catch(n){return Promise.reject(n)}};export default function(n,r){void 0===n&&(n=[]),void 0===r&&(r=[]);for(var t=[".appref-ms",".exe",".lnk",".bat",".url"],e=["C:\\Users\\Default\\Links","C:\\Users\\Default\\Desktop","C:\\Users\\Administrator\\Desktop","C:\\Users\\Default\\AppData\\Roaming\\Microsoft\\Internet Explorer","C:\\ProgramData\\Microsoft\\Windows\\Start Menu\\Programs"],o=0,i=n;o<i.length;o+=1){var u=i[o];e.includes(u)||e.push(u)}for(var s=0,c=r;s<c.length;s+=1){var f=c[s];t.includes(f)||t.push(f)}return v(e,t)}
